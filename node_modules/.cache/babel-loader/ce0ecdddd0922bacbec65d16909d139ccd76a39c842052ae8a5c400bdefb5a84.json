{"ast":null,"code":"import'./App.css';import{Routes,Route}from'react-router-dom';import React,{useReducer,useRef,useEffect,useState}from'react';import Home from'./pages/Home';import New from'./pages/New';import Diary from'./pages/Diary';import Edit from'./pages/Edit';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const mockData=[{id:'1',date:new Date().getTime()-1,content:'mock1',emotionId:1},{id:'2',date:new Date().getTime()-2,content:'mock2',emotionId:2},{id:'3',date:new Date().getTime()-3,content:'mock3',emotionId:3}];export const DiaryStateContext=/*#__PURE__*/React.createContext();export const DiaryDispatchContext=/*#__PURE__*/React.createContext();function reducer(state,action){switch(action.type){case'INIT':{return action.data;}case'CREATE':{const newState=[action.data,...state];localStorage.setItem('diary',JSON.stringify(newState));return newState;}case'UPDATE':{const newState=state.map(it=>String(it.id)===String(action.data.id)?{...action.data}:it);localStorage.setItem('diary',JSON.stringify(newState));return newState;}case'DELETE':{const newState=state.filter(it=>String(it.id)!==String(action.targetId));localStorage.setItem('diary',JSON.stringify(newState));return newState;}default:return state;}}function App(){const[isDataLoaded,setIsDataLoaded]=useState(false);const[data,dispatch]=useReducer(reducer,[]);const idRef=useRef(0);useEffect(()=>{let rawData=localStorage.getItem('diary');if(!rawData){localStorage.setItem('diary',JSON.stringify(mockData));setIsDataLoaded(true);}rawData=localStorage.getItem('diary');const localData=JSON.parse(rawData);if(localData.length===0){setIsDataLoaded(true);return;}localData.sort((a,b)=>Number(b.id)-Number(a.id));idRef.current=localData[0].id+1;dispatch({type:'INIT',data:localData});setIsDataLoaded(true);},[]);const onCreate=(date,content,emotionId)=>{dispatch({type:'CREATE',data:{id:idRef.current,date:new Date(date).getTime(),content,emotionId}});idRef.current+=1;};const onUpdate=(targetId,date,content,emotionId)=>{dispatch({type:'UPDATE',data:{id:targetId,date:new Date(date).getTime(),content,emotionId}});};const onDelete=targetId=>{dispatch({type:'DELETE',targetId});};if(!isDataLoaded){return/*#__PURE__*/_jsx(\"div\",{children:\"\\uB370\\uC774\\uD130\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4\"});}else{return/*#__PURE__*/_jsx(DiaryStateContext.Provider,{value:data,children:/*#__PURE__*/_jsx(DiaryDispatchContext.Provider,{value:{onCreate,onUpdate,onDelete},children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/new\",element:/*#__PURE__*/_jsx(New,{})}),/*#__PURE__*/_jsx(Route,{path:\"/diary/:id\",element:/*#__PURE__*/_jsx(Diary,{})}),/*#__PURE__*/_jsx(Route,{path:\"/edit/:id\",element:/*#__PURE__*/_jsx(Edit,{})})]})})})});}}export default App;","map":{"version":3,"names":["Routes","Route","React","useReducer","useRef","useEffect","useState","Home","New","Diary","Edit","jsx","_jsx","jsxs","_jsxs","mockData","id","date","Date","getTime","content","emotionId","DiaryStateContext","createContext","DiaryDispatchContext","reducer","state","action","type","data","newState","localStorage","setItem","JSON","stringify","map","it","String","filter","targetId","App","isDataLoaded","setIsDataLoaded","dispatch","idRef","rawData","getItem","localData","parse","length","sort","a","b","Number","current","onCreate","onUpdate","onDelete","children","Provider","value","className","path","element"],"sources":["C:/react/hjdiary/src/App.js"],"sourcesContent":["import './App.css';\nimport { Routes, Route } from 'react-router-dom';\nimport React, { useReducer, useRef, useEffect, useState } from 'react';\nimport Home from './pages/Home';\nimport New from './pages/New';\nimport Diary from './pages/Diary';\nimport Edit from './pages/Edit';\n\nconst mockData = [\n  { id: '1', date: new Date().getTime() - 1, content: 'mock1', emotionId: 1, },\n  { id: '2', date: new Date().getTime() - 2, content: 'mock2', emotionId: 2, },\n  { id: '3', date: new Date().getTime() - 3, content: 'mock3', emotionId: 3, },\n]\nexport const DiaryStateContext = React.createContext();\nexport const DiaryDispatchContext = React.createContext();\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'INIT': {\n      return action.data;\n    }\n    case 'CREATE': {\n      const newState = [action.data, ...state];\n      localStorage.setItem('diary', JSON.stringify(newState));\n      return newState;\n    }\n    case 'UPDATE': {\n      const newState = state.map(it =>\n        String(it.id) === String(action.data.id) ? { ...action.data } : it\n      );\n      localStorage.setItem('diary', JSON.stringify(newState));\n      return newState;\n    }\n    case 'DELETE': {\n      const newState = state.filter((it) => String(it.id) !== String(action.targetId));\n      localStorage.setItem('diary', JSON.stringify(newState));\n      return newState;\n    }\n    default: return state;\n  }\n\n}\n\nfunction App() {\n  const [isDataLoaded, setIsDataLoaded] = useState(false);\n  const [data, dispatch] = useReducer(reducer, []);\n  const idRef = useRef(0);\n  useEffect(() => {\n    let rawData = localStorage.getItem('diary');\n    if (!rawData) {\n      localStorage.setItem('diary',JSON.stringify(mockData));\n      setIsDataLoaded(true);\n    }\n    rawData = localStorage.getItem('diary');\n    const localData = JSON.parse(rawData);\n    if (localData.length === 0) {\n      setIsDataLoaded(true);\n      return;\n    }\n    localData.sort((a, b) => Number(b.id) - Number(a.id));\n    idRef.current = localData[0].id + 1;\n    dispatch({ type: 'INIT', data: localData });\n    setIsDataLoaded(true);\n  }, []);\n  const onCreate = (date, content, emotionId) => {\n    dispatch({\n      type: 'CREATE',\n      data: {\n        id: idRef.current,\n        date: new Date(date).getTime(),\n        content,\n        emotionId,\n      }\n    })\n    idRef.current += 1;\n  }\n  const onUpdate = (targetId, date, content, emotionId) => {\n    dispatch({\n      type: 'UPDATE',\n      data: {\n        id: targetId,\n        date: new Date(date).getTime(),\n        content,\n        emotionId,\n      }\n    })\n  }\n\n  const onDelete = (targetId) => {\n    dispatch({\n      type: 'DELETE',\n      targetId,\n    })\n  }\n  if (!isDataLoaded) {\n    return <div>데이터를 불러오는 중입니다</div>;\n  } else {\n    return (\n      <DiaryStateContext.Provider value={data}>\n        <DiaryDispatchContext.Provider value={{ onCreate, onUpdate, onDelete }}>\n          <div className=\"App\">\n            <Routes>\n              <Route path='/' element={<Home />} />\n              <Route path='/new' element={<New />} />\n              <Route path='/diary/:id' element={<Diary />} />\n              <Route path='/edit/:id' element={<Edit />} />\n            </Routes>\n          </div>\n        </DiaryDispatchContext.Provider>\n      </DiaryStateContext.Provider>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}